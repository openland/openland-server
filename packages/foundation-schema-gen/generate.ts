import { SchemaModel } from './Model';
import * as fs from 'fs';
import { generateEntity } from './generators/Entity';

export function generate(model: SchemaModel, path: string) {
    let res = '// THIS FILE IS AUTOGENERATED! DO NOT TRY TO EDIT!\n';
    res += 'import { SEntity } from \'foundation-orm/SEntity\';\n';
    res += 'import { SNamespace } from \'foundation-orm/SNamespace\';\n';
    res += 'import { SEntityFactory } from \'foundation-orm/SEntityFactory\';\n';
    res += 'import { SConnection } from \'foundation-orm/SConnection\';\n';
    res += 'import { SContext } from \'foundation-orm/SContext\';\n';
    res += '\n';
    for (let e of model.entities) {
        res += generateEntity(e);
        res += '\n';
    }
    fs.writeFileSync(path, res);
}