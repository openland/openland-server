#
# Invites
#

type Invite {
    id: ID!
    key: String!
    ttl: String
}

type InviteInfo {
    id: ID!
    key: String!
    orgId: ID!
    title: String!
    photo: String
    photoRef: ImageRef
    joined: Boolean!
    creator: User
    forEmail: String
    forName: String
    description: String
    membersCount: Int
    organization: Organization
}

type AppInvite {
    inviter: User!
}

type AppInviteInfo {
    inviter: User!
}

type InviteHistotyInfo {
    acceptedBy: User
    forEmail: String!
    isGlobal: Boolean!
}

union ResolveInviteEntry = InviteInfo | AppInvite | RoomInvite

extend type Query {
    alphaInvites: [Invite!]
    alphaInviteInfo(key: String!): InviteInfo
    appInvite: String!
    appInviteFromUser(shortname: String!): String!
    appInviteInfo(key: String!): AppInvite
    alphaAppInvite: String! @deprecated(reason: "renamed to 'appInvite'")
    alphaAppInviteInfo(key: String!): AppInviteInfo @deprecated(reason: "renamed to 'appInviteInfo'")
    alphaInvitesHistory: [InviteHistotyInfo!]
    alphaResolveInvite(key: String!): ResolveInviteEntry
}

extend type Mutation {
    alphaCreateInvite: Invite!
    alphaDeleteInvite(id: ID!): String!
    alphaJoinInvite(key: String!, isNewUser: Boolean): ID!
    joinAppInvite(key: String!, isNewUser: Boolean): ID!
}
