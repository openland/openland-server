union FeedItem = FeedPost

union FeedPostAuthor = User | Organization

type FeedPost {
    #
    #   State
    #
    id: ID!
    date: Date!
    author: FeedPostAuthor!
    edited: Boolean!
    reactions: [ModernMessageReaction!]!
    isMentioned: Boolean!

    #
    #   Content
    #
    message: String
    spans: [MessageSpan!]!
    attachments: [ModernMessageAttachment!]!
    commentsCount: Int!
    slides: [Slide!]!
    fallback: String!
}

type FeedItemConnection {
    items: [FeedItem!]!
    cursor: String
}

union Slide = TextSlide

union SlideAttachment = User | SharedRoom

type TextSlide {
    id: ID!
    text: String!
    spans: [MessageSpan!]!
    cover: Image
    coverAlign: SlideCoverAlign
    attachments: [SlideAttachment!]!
}

enum SlideType {
    Text
}

enum SlideCoverAlign {
    Top,
    Bottom,
    Cover
}

input SlideInput {
    type: SlideType!
    text: String
    spans: [MessageSpanInput!]
    mentions: [MentionInput!]
    cover: ImageRefInput
    coverAlign: SlideCoverAlign
    attachments: [ID!]
}

extend type Query {
    alphaHomeFeed(first: Int!, after: String): FeedItemConnection!
    alphaFeedItem(id: ID!): FeedItem!
}

extend type Mutation {
    alphaCreateFeedPost(message: String, mentions: [MentionInput!], fileAttachments: [FileAttachmentInput!], spans: [MessageSpanInput!], slides: [SlideInput!]): FeedItem!
    alphaEditFeedPost(feedItemId: ID!, message: String, mentions: [MentionInput!], fileAttachments: [FileAttachmentInput!], spans: [MessageSpanInput!], slides: [SlideInput!]): FeedItem!
    alphaDeleteFeedPost(feedItemId: ID!): Boolean!
    alphaCreateGlobalFeedPost(message: String, mentions: [MentionInput!], fileAttachments: [FileAttachmentInput!], spans: [MessageSpanInput!], slides: [SlideInput!], fromCommunity: ID): FeedItem!

    feedReactionAdd(feedItemId: ID!, reaction: MessageReactionType!): Boolean!
    feedReactionRemove(feedItemId: ID!, reaction: MessageReactionType!): Boolean!

    feedSubscribeUser(uid: ID!): Boolean!
    feedUnsubscribeUser(uid: ID!): Boolean!
}