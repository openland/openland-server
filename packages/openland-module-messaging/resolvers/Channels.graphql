type ChannelConversation implements Conversation {
    id: ID!
    flexibleId: ID!
    title: String!
    photos: [String!]!
    members: [User!]!
    unreadCount: Int!
    topMessage: ConversationMessage
    settings: ConversationSettings!

    membersCount: Int!
    memberRequestsCount: Int!
    featured: Boolean!
    hidden: Boolean!
    description: String
    longDescription: String
    myStatus: ChannelMembershipStatus!
    organization: Organization
    isRoot: Boolean!

    photo: String
    photoRef: ImageRef
    
    socialImage: String
    socialImageRef: ImageRef
    pinnedMessage: ConversationMessage

    membersOnline: Int!
    myRole: String
}

enum ChannelMembershipStatus {
    invited
    member
    requested
    none
}

type ChannelMemberOrg {
    organization: Organization!
    role: String!
    status: String!
}

type ChannelMember {
    user: User!
    role: String!
    status: String!
}

type ChannelInvite {
    channel: ChannelConversation!
    invitedByUser: User!
}

type ChannelOrgInvite {
    channel: ChannelConversation!
    invitedByOrg: Organization!
    invitedByUser: User!
}

type ChannelJoinRequestOrg {
    organization: Organization!
    user: User!
}

type ChannelConversationConnectionEdge {
    node: ChannelConversation!
    cursor: String!
}

type ChannelConversationConnection {
    edges: [ChannelConversationConnectionEdge!]!
    pageInfo: PageInfo!
}

input ChannelInviteRequest {
    email: String!,
    emailText: String,
    firstName: String,
    lastName: String
}

extend type Mutation {
    alphaChannelCreate(title: String!, photoRef: ImageRefInput, message: String, description: String, oid: ID): Conversation! @disabled

    alphaChannelSetFeatured(channelId: ID!, featured: Boolean!): Conversation! @disabled
    alphaChannelHideFromSearch(channelId: ID!, hidden: Boolean!): Conversation! @disabled
    
    alphaChannelInvite(channelId: ID!, userId: ID!): ConversationUpdateResponse! @disabled
    alphaChannelJoin(channelId: ID!): ConversationUpdateResponse! @disabled
    alphaChannelRevokeInvite(channelId: ID!, userId: ID!): String! @disabled
    alphaChannelCancelRequest(channelId: ID!): String @disabled

    alphaChannelInviteMembers(channelId: ID!, inviteRequests: [ChannelInviteRequest!]!): String! @disabled
    alphaChannelJoinInvite(invite: String!, isNewUser: Boolean): ID! @disabled
    alphaChannelRenewInviteLink(channelId: ID!): String! @disabled
}

extend type Query {
    alphaChannelsList(first: Int!, after: String): ConversationConnection! @disabled
    alphaChannelMembers(channelId: ID!): [ChannelMember!]! @disabled
    alphaChannelsFeatured: [ChannelConversation!]! @disabled
    alphaChannels(
        query: String,
        first: Int!,
        after: String,
        page: Int,
        sort: String
    ): ChannelConversationConnection! @disabled
    alphaChannelInviteInfo(uuid: String!): ChannelInvite @disabled
    alphaChannelInviteLink(channelId: ID!): String! @disabled
}

